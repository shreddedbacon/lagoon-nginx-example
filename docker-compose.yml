version: '2'
services:
  nginx:
    build:
      context: .
      dockerfile: Dockerfile
    labels:
      lagoon.type: basic
      lagoon.service.port: 8080
    ports:
      - "8080:8080"
  app1:
    build:
      context: ./app1
      dockerfile: app1.Dockerfile
    labels:
      lagoon.type: basic
      lagoon.service.port: 8080
      lagoon.autogeneratedroute: false
    ports:
      - "8081:8080"
  app2:
    build:
      context: ./app2
      dockerfile: app2.Dockerfile
    labels:
      lagoon.type: basic
      lagoon.service.usecomposeports: true
      lagoon.autogeneratedroute: false
    ports:
      - "8082:8080"
